# November 14th 2025 12:10pm
This will be a loose simulation of how a bank will work. It will rely heavily on my understandings of using semaphores for synchronization and threading. There are three tellers, and all three must be ready for the bank to open. Tellers will handle the requests of customers. The customers that come to the bank will have one of two options, to either withdraw or desposit, and this is decided randomly when the customer is initialized. If there is a free teller, the customer can go to that teller, otherwise they will wait in line. The customers will communicate the transaction they want to fulfill to the teller. For a desposit, the teller must go into the safe, and only two tellers can be in there at a time. For a withdraw, a teller must get approval from a manager for that withdraw, and only one at a time. Once the transaction is done, the customer leaves and the teller signals the next one. After all 50 customers are done, the bank closes. Each teller and customer need a unique id. The teller must follow the exact sequence every time: declare it's ready, wait for customer, asks for transaction, receive transaction, get manager approval and wait a bit for it on a withdraw, go to the safe (wait if two tellers are there already), sleep for a bit to represent the transaction, tell the customer it is done, wait for customer to leave. The customer decides to withdraw or desposit randomly at the beginning, and then follows this sequence. wait 0-100ms, enter the bank, get in line (immediately go to teller if one is open), waits, give id (number), wait to ask for transaction, tell transaction, wait for teller to complete, leave bank. I will approach this first by declaring the global variables and semaphores. I will make variables for teller's availability, waiting, transactions being given, if the transaction is completed or not, customers leaving, the safe, the manager, the door to let in customers, and the remaining customers. These will all help to test and see if the bank is still open. I will make a log function to output to both the terminal and an output file. It will take a message from the customer or teller thread and will both print it out, and then write to a file. I will make two functions for the teller and customer thread, and fill it in with the appriopiate information at each point. I will have to think about this slowly and logically at first. 
## November 15th 2025 9:10pm
Today, I will try and declare the global variables and semaphores needed for this project. I will just make them outside of any function and thread. Then after that, I will make a log function that receives a message from a thread, and writes it to both a file that I make and outputs it to the terminal too. Making it a function would be more helpful because it should not depend on a semaphore. Then I plan to make the customer thread, the teller thread, and fill out main with what it needs to call. First, the teller thread will be called to ready all tellers. This will be done by incrementing the semaphore with the tellerid, and then moving onto the next one. After this is done, the tellers will wait for the customer to come by and give it information for the transaction. It will do this by asking for customer's chosen transaction, which will be told in the customerID that is generated at the beginning. Once the teller does that, it will check if it is withdraw or desposit. If it is withdraw, it will ask the manager for approval, which in this case, is a semaphore that the program acquires, waits a certain time, and then gets it's permission by releasing it. It then goes to the safe, sleeps for a brief time, and releases it. The safe is also a semaphore that must be acquired and waited on if someone is using it already. Once this is done, release the transaction back to the customer and wait for the customer to fully leave. Once that is done, I will signal that the next customer can be helped by this teller. After all this, check to see if there is any customers left in queue. Once I finish with the teller thread, I will make the customer thread. The customer thread will start off with a reminder of the chosen transaction for the customerID. Then I will briefly delay arrival for ease of reading. Then, as I noticed in the example, I will let them enter the bank only two at a time. I will wait on a door semaphore to be avaible to accomplish this. Once that happens, they may enter the bank. If there is nobody in line, they will basically go straight into the teller. Otherwise, I will block them from seeing the tellers with a thread lock. They will be appended to a queue. Once it is their turn, they will check to see if there is any availble tellers in a loop. If there is one, set it as their assigned_teller, pop them from a queue, and break out of the loop. Otherwise, simply wait another second and see if a new teller is there. Once the teller is there, the customer thread will release the waiting teller, and it give its transaction. It will then be forced to wait for the teller to finish the business I have described above. Once the thread has received confirmation of its transaction being completed, it will release the teller and leave the bank. Main will simply be used to start the tellers to get ready, and start the semaphores and customers with their processes using for loops. It will handle the first few logs and the last log, then exit the program. 
### November 15th 2025 10:49pm
I realized I could use an extra semaphore for when the customer leaves, as I could not figure out how to signal the customer leaving otherwise. The thread for the teller took a bit of time, but I think it will work decently and the logic makes sense so far. 
## November 15th 2025 11:44pm
Working with semaphores is a bit more difficult then I thought it would be. I feel like I have a lot of almost useless signals that I use just to tell them to release or just simply wait on it, despite not containing an actual ID. I also had to add some to help with my threads beyond what I intiailly thought I would need. Getting the logic done for customer and teller was relatively straightforward, as the details outlined for that they needed to do made sense. A couple of youtube tutorials helped me realize how to signal to each other properly. Right now, while the program does work and compile correctly, it is not perfect. I notice that while at first the customers to come into the bank one or two at a time, it seems the timing gets lost and they all flood in. I will have to fix that, as I assume door does not get refreshed or something of the same effect. My plans for tomorrow involve fixing this, and hopefully making it closer the sample output that was given to us. Overall my session went relatively according to plan, and it is pretty cool to see the back and forth between the two threads. 
